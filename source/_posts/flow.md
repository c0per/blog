---
title: 上下界网络流
date: 2019-06-22 18:38:19
tags:
- 网络流
- 算法讲解
categories:
- 网络流
---

# 上下界网络流

每天边都有流量上界和下界的网络流题目。

## 无源汇

### 可行流

我们将每条边拆分成必须流的部分（红）和可选的部分（黑）。

{% asset_img flow1.png 边的拆分 %}

为了保证红色的边必须满流，建立2个超级源点，汇点$S，T$。并建立如下的新图。

{% asset_img flow2.png 新图}

跑S到T的最大流，如果S的每边都能流满，那么原图中的下界要求也可以达到，且残量网络中的便是一种可行的方案。

同时，也可以将每个点的必须流的流量统计为$d[x]$（流出记为负数，流入记为正数）。

如果$d[x]>0$，连边$(S, x, d[x])$。

否则连边$(x, T, d[x])$。

（这样做会快一点）

## 有源汇

### 可行流

和无源汇的版本类似，如果我们连一条边$(t, s, inf)$，就可以转化成无源汇的版本。

### 最大流

按照无源汇的方法建图，并连边$(t, s, inf)$，并判断是否可行。

如果可行，则在残量网络上求$s$到$t$的最大流，便是答案。

### 最小流

同样的建图之后，答案为$inf-t$到$s$的最大流。